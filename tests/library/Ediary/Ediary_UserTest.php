<?php
require_once 'PHPUnit/Framework.php';

/**
 * Test class for Ediary_User.
 * Generated by PHPUnit on 2011-02-26 at 14:23:54.
 */
class Ediary_UserTest extends ControllerTestCase
{
    /**
     * @var Ediary_User
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        parent::setUp();
        $this->object = new Ediary_User();
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
    }

    /**
     * @todo Implement testGetName().
     */
    public function testGetName()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testGetId().
     */
    public function testGetId()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testNewFromRow().
     */
    public function testNewFromRow()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testLoadFromRow().
     */
    public function testLoadFromRow()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testFindById().
     */
    public function testFindById()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testFindByName().
     */
    public function testFindByName()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testInsert().
     */
    public function testInsert()
    {
        $result = $this->_insertUser();
        $this->assertTrue($result > 0);
    }

    private function _insertUser() {
        $user = $this->object;
        $email = 'lds2012@gmail.com' . microtime();
        $name = "l' or 1=1 ds";
        $password = '123';

        return $user->create($email, $name, $password);
    }

    /**
     * @todo Implement testDelete().
     */
    public function testDelete()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    /**
     * @todo Implement testUpdate().
     */
    public function testUpdate()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
          );
    }

    public function testIsExistsEmail() {
        $user = $this->object;
        $email = 'lds2012@g\'mail.com' . time();
        $name = 'lds\' or 1=1';
        $password = '123';

        // pre check
        $this->assertFalse($this->object->isExistsEmail($email));

        $user->create($email, $name, $password);
        $this->object->isExistsEmail($email);

        // post check
        $this->assertTrue($this->object->isExistsEmail($email));
    }
}
?>
