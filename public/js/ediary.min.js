if(!window.console)window.console={log:function(){},warn:function(){},error:function(){},fatal:function(){},debug:function(){},dir:function(){}};
(function(h){var e={baseUrl:"",options:{autoLoad:true},modules:{},url:function(a){return this.baseUrl+a},extend:function(a,b,d){if(typeof this.modules[a]!=="undefined")console.error("Duplication Module, The "+a+" module is exsits.");else{var c=h.extend({},this.options,d);switch(typeof b){case "object":this[a]=b;break;case "function":if(c.autoLoad)this.loadModule(b,d);else this.modules[a]={origin:b,load:false};break;default:return}}},loadModule:function(a,b){var d;if(typeof a=="function")d=a;else if(typeof a==
"string"){var c=this.modules[a];if(typeof c!=="undefined"){d=c.origin;c.load=true}else{console.warn("The Module %s is not exsits.",a);return}}d.call(this,this,b)},include:function(a){if(!(a==null||typeof a!="string")){var b=document.createElement("script");b.type="text/javascript";b.charset="utf-8";b.src=a;h("head").append(b)}},destroy:function(){}};window.Ediary=e;e.extend("i18n",function(a){a.i18n={languages:{},extend:function(b,d){if(typeof this.languages[b]=="undefined")this.languages[b]=d;return d},
get:function(b){if(typeof this.languages[b]!=="undefined")return this.languages[b]}}});e.extend("Validator",function(a){a.i18n.extend("Validator",{USERNAME_INVALID:"\u7528\u6237\u540d\u53ea\u80fd\u8f93\u5165\u5b57\u7b26, \u6570\u5b57\u548c\u7a7a\u683c",EMAIL_IS_NULL:"\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1\u5730\u5740",EMAIL_INVALID:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f",EMAIL_IS_EXISTS:"\u8be5\u7535\u5b50\u90ae\u4ef6\u5df2\u7ecf\u88ab\u6ce8\u518c",PASSWORD_IS_NULL:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",
PASSWORD_INVALID:"\u5bc6\u7801\u53ea\u5141\u8bb8\u6570\u5b57,\u5b57\u6bcd\u548c\u4e0b\u5212\u7ebf",PASSWORD_TOO_SHORT:"\u5bc6\u7801\u81f3\u5c118\u4f4d\u6570",PASSWORD_NOT_SAME:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u6837"});var b=a.i18n.get("Validator");if(typeof jQuery.validator=="undefined")console.warn("jQuery Validator Plugin is not loaded.");else{jQuery.validator.addMethod("alnum",function(g,f){return this.optional(f)||/^[\w]+$/.test(g)});jQuery.validator.addMethod("regex",function(g,
f,i){return this.optional(f)||i.test(g)});if(typeof a.i18n==="undefined")console.warn("Validator Module require i18n module.");else{var d={rules:{email:{required:true,email:true,remote:"/user/account/exists"},password:{required:true,minlength:8,alnum:true},rePassword:{required:true,equalTo:"#password"}},messages:{email:{required:b.EMAIL_IS_NULL,email:b.EMAIL_INVALID,remote:b.EMAIL_IS_EXISTS},password:{required:b.PASSWORD_IS_NULL,alnum:b.PASSWORD_INVALID,minlength:b.PASSWORD_TOO_SHORT},rePassword:{required:b.PASSWORD_IS_NULL,
equalTo:b.PASSWORD_NOT_SAME}}},c={rules:{email:{required:true,email:true},password:{required:true}},messages:{email:{required:a.i18n.EMAIL_IS_NULL,email:a.i18n.EMAIL_INVALID},password:{required:a.i18n.PASSWORD_IS_NULL}}};a.Validator={init:function(){},options:{errorElement:"span",success:function(g){g.html("Ok!").addClass("valid")}},getRegisterForm:function(){return h.extend({},this.options,d)},getLoginForm:function(){return h.extend({},this.options,c)}}}}},{autoLoad:false});e.extend("Events",function(a){var b=
function(){this.listeners={}};b.prototype={addListener:function(c,g){if(typeof this.listeners[c]=="undefined")this.listeners[c]=[];this.listeners[c].push(g)},callListener:function(c,g){if(c=this.listeners[c])for(var f in c)c[f].handleEvent(g)},prepareArguments:function(){}};var d=function(c){this.handler=c};d.prototype={handleEvent:function(c){this.handler.apply(this,c)},makeArgs:function(){}};a.Events=b;a.Listener=d});jQuery.extend({})})(jQuery);
(function(h){Ediary.extend("Notice",{element:null,isReady:false,options:{element:"#notice"},timer:null,init:function(e){if(!this.isReady){h.extend(this.options,e);e=this.options;this.element=h(e.element);if(this.element.length==0)console.warn("The Notice Element is Missing. It shout be : "+e.element);else{this.isReady=true;return this}}},showMessage:function(e,a){this.isReady||this.init();this._setMessage(e);typeof a!=="undefined"&&this._hide(a)},getMessage:function(){return this.element.html()},
_setMessage:function(e){this.timer&&clearTimeout(this.timer);this.element.show();this.element.html(e)},_resetMessage:function(){this._setMessage("")},_hide:function(e){var a=this;this.timer=setTimeout(function(){a._resetMessage();a.element.hide()},e)},destroy:function(){this._resetMessage();this.element=null}})})(jQuery);
(function(h){var e=false,a=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(b){function d(){!e&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;e=true;var g=new this;e=false;for(var f in b)g[f]=typeof b[f]=="function"&&typeof c[f]=="function"&&a.test(b[f])?function(i,j){return function(){this._super=c[i];var k=j.apply(this,arguments);delete this._super;return k}}(f,b[f]):b[f];d.prototype=g;d.constructor=d;d.extend=arguments.callee;return d};
if(!h.Class)h.Class=Class})(window);
