(function(r){var e=r.DOM,p=r.dom.Event,C=r.extend,s=r.each,A=r.util.Cookie,B,z=r.explode;r.ThemeManager.requireLangPack("advanced");r.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],
justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc",
"mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc",
"mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(a,c){var b=this,f,d,h;b.editor=a;b.url=c;b.onResolveName=new r.util.Dispatcher(this);a.forcedHighContrastMode=a.settings.detect_highcontrast&&b._isHighContrast();a.settings.skin=a.forcedHighContrastMode?"highcontrast":a.settings.skin;b.settings=f=C({theme_advanced_path:true,
theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",
theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",readonly:a.settings.readonly},a.settings);if(!f.font_size_style_values)f.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt";if(r.is(f.theme_advanced_font_sizes,"string")){f.font_size_style_values=r.explode(f.font_size_style_values);f.font_size_classes=r.explode(f.font_size_classes||"");
h={};a.settings.theme_advanced_font_sizes=f.theme_advanced_font_sizes;s(a.getParam("theme_advanced_font_sizes","","hash"),function(i,g){var o;if(g==i&&i>=1&&i<=7){g=i+" ("+b.sizes[i-1]+"pt)";o=f.font_size_classes[i-1];i=f.font_size_style_values[i-1]||b.sizes[i-1]+"pt"}if(/^\s*\./.test(i))o=i.replace(/\./g,"");h[g]=o?{"class":o}:{fontSize:i}});f.theme_advanced_font_sizes=h}if((d=f.theme_advanced_path_location)&&d!="none")f.theme_advanced_statusbar_location=f.theme_advanced_path_location;if(f.theme_advanced_statusbar_location==
"none")f.theme_advanced_statusbar_location=0;a.settings.content_css!==false&&a.contentCSS.push(a.baseURI.toAbsolute(c+"/skins/"+a.settings.skin+"/content.css"));a.onInit.add(function(){if(!a.settings.readonly){a.onNodeChange.add(b._nodeChanged,b);a.onKeyUp.add(b._updateUndoStatus,b);a.onMouseUp.add(b._updateUndoStatus,b);a.dom.bind(a.dom.getRoot(),"dragend",function(){b._updateUndoStatus(a)})}});a.onSetProgressState.add(function(i,g,o){var l,j=i.id,n;if(g)b.progressTimer=setTimeout(function(){l=i.getContainer();
l=l.insertBefore(e.create("DIV",{style:"position:relative"}),l.firstChild);n=e.get(i.id+"_tbl");e.add(l,"div",{id:j+"_blocker","class":"mceBlocker",style:{width:n.clientWidth+2,height:n.clientHeight+2}});e.add(l,"div",{id:j+"_progress","class":"mceProgress",style:{left:n.clientWidth/2,top:n.clientHeight/2}})},o||0);else{e.remove(j+"_blocker");e.remove(j+"_progress");clearTimeout(b.progressTimer)}});e.loadCSS(f.editor_css?a.documentBaseURI.toAbsolute(f.editor_css):c+"/skins/"+a.settings.skin+"/ui.css");
f.skin_variant&&e.loadCSS(c+"/skins/"+a.settings.skin+"/ui_"+f.skin_variant+".css")},_isHighContrast:function(){var a,c=e.add(e.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});a=(e.getStyle(c,"background-color",true)+"").toLowerCase().replace(/ /g,"");e.remove(c);return a!="rgb(171,239,86)"&&a!="#abef56"},createControl:function(a,c){var b;if(b=c.createControl(a))return b;switch(a){case "styleselect":return this._createStyleSelect();case "formatselect":return this._createBlockFormats();
case "fontselect":return this._createFontSelect();case "fontsizeselect":return this._createFontSizeSelect();case "forecolor":return this._createForeColorMenu();case "backcolor":return this._createBackColorMenu()}if(b=this.controls[a])return c.createButton(a,{title:"advanced."+b[0],cmd:b[1],ui:b[2],value:b[3]})},execCommand:function(a,c,b){if(a=this["_"+a]){a.call(this,c,b);return true}return false},_importClasses:function(){var a=this.editor,c=a.controlManager.get("styleselect");c.getLength()==0&&
s(a.dom.getClasses(),function(b,f){var d="style_"+f;a.formatter.register(d,{inline:"span",attributes:{"class":b["class"]},selector:"*"});c.add(b["class"],d)})},_createStyleSelect:function(){var a=this,c=a.editor,b;b=c.controlManager.createListBox("styleselect",{title:"advanced.style_select",onselect:function(f){var d,h=[];s(b.items,function(i){h.push(i.value)});c.focus();c.undoManager.add();d=c.formatter.matchAll(h);if(!f||d[0]==f)d[0]&&c.formatter.remove(d[0]);else c.formatter.apply(f);c.undoManager.add();
c.nodeChanged();return false}});c.onInit.add(function(){var f=0,d=c.getParam("style_formats");d?s(d,function(h){var i,g=0;s(h,function(){g++});if(g>1){i=h.name=h.name||"style_"+f++;c.formatter.register(i,h);b.add(h.title,i)}else b.add(h.title)}):s(c.getParam("theme_advanced_styles","","hash"),function(h,i){var g;if(h){g="style_"+f++;c.formatter.register(g,{inline:"span",classes:h,selector:"*"});b.add(a.editor.translate(i),g)}})});b.getLength()==0&&b.onPostRender.add(function(f,d){if(b.NativeListBox)p.add(d.id,
"focus",a._importClasses,a);else{p.add(d.id+"_text","focus",a._importClasses,a);p.add(d.id+"_text","mousedown",a._importClasses,a);p.add(d.id+"_open","focus",a._importClasses,a);p.add(d.id+"_open","mousedown",a._importClasses,a)}});return b},_createFontSelect:function(){var a,c=this.editor;(a=c.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(b){var f=a.items[a.selectedIndex];if(!b&&f)c.execCommand("FontName",false,f.value);else{c.execCommand("FontName",false,
b);a.select(function(d){return b==d});return false}}}))&&s(c.getParam("theme_advanced_fonts",this.settings.theme_advanced_fonts,"hash"),function(b,f){a.add(c.translate(f),b,{style:b.indexOf("dings")==-1?"font-family:"+b:""})});return a},_createFontSizeSelect:function(){var a=this,c=a.editor,b,f=0;(b=c.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(d){var h=b.items[b.selectedIndex];if(!d&&h){h=h.value;if(h["class"]){c.formatter.toggle("fontsize_class",{value:h["class"]});
c.undoManager.add();c.nodeChanged()}else c.execCommand("FontSize",false,h.fontSize)}else{if(d["class"]){c.focus();c.undoManager.add();c.formatter.toggle("fontsize_class",{value:d["class"]});c.undoManager.add();c.nodeChanged()}else c.execCommand("FontSize",false,d.fontSize);b.select(function(i){return d==i});return false}}}))&&s(a.settings.theme_advanced_font_sizes,function(d,h){var i=d.fontSize;if(i>=1&&i<=7)i=a.sizes[parseInt(i)-1]+"pt";b.add(h,d,{style:"font-size:"+i,"class":"mceFontSize"+f++ +
(" "+(d["class"]||""))})});return b},_createBlockFormats:function(){var a,c={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},b=this;(a=b.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"}))&&s(b.editor.getParam("theme_advanced_blockformats",
b.settings.theme_advanced_blockformats,"hash"),function(f,d){a.add(b.editor.translate(d!=f?d:c[f]),f,{"class":"mce_formatPreview mce_"+f})});return a},_createForeColorMenu:function(){var a,c=this,b=c.settings,f={},d;if(b.theme_advanced_more_colors)f.more_colors_func=function(){c._mceColorPicker(0,{color:a.value,func:function(h){a.setColor(h)}})};if(d=b.theme_advanced_text_colors)f.colors=d;if(b.theme_advanced_default_foreground_color)f.default_color=b.theme_advanced_default_foreground_color;f.title=
"advanced.forecolor_desc";f.cmd="ForeColor";f.scope=this;return a=c.editor.controlManager.createColorSplitButton("forecolor",f)},_createBackColorMenu:function(){var a,c=this,b=c.settings,f={},d;if(b.theme_advanced_more_colors)f.more_colors_func=function(){c._mceColorPicker(0,{color:a.value,func:function(h){a.setColor(h)}})};if(d=b.theme_advanced_background_colors)f.colors=d;if(b.theme_advanced_default_background_color)f.default_color=b.theme_advanced_default_background_color;f.title="advanced.backcolor_desc";
f.cmd="HiliteColor";f.scope=this;return a=c.editor.controlManager.createColorSplitButton("backcolor",f)},renderUI:function(a){var c,b,f,d=this,h=d.editor,i=d.settings,g,o,l;if(h.settings)h.settings.aria_label=i.aria_label+h.getLang("advanced.help_shortcut");c=o=e.create("span",{role:"application","aria-labelledby":h.id+"_voice",id:h.id+"_parent","class":"mceEditor "+h.settings.skin+"Skin"+(i.skin_variant?" "+h.settings.skin+"Skin"+d._ufirst(i.skin_variant):"")});e.add(c,"span",{"class":"mceVoiceLabel",
style:"display:none;",id:h.id+"_voice"},i.aria_label);e.boxModel||(c=e.add(c,"div",{"class":"mceOldBoxModel"}));c=g=e.add(c,"table",{role:"presentation",id:h.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});c=f=e.add(c,"tbody");switch((i.theme_advanced_layout_manager||"").toLowerCase()){case "rowlayout":b=d._rowLayout(i,f,a);break;case "customlayout":b=h.execCallback("theme_advanced_custom_layout",i,f,a,o);break;default:b=d._simpleLayout(i,f,a,o)}c=a.targetNode;l=g.rows;e.addClass(l[0],
"mceFirst");e.addClass(l[l.length-1],"mceLast");s(e.select("tr",f),function(j){e.addClass(j.firstChild,"mceFirst");e.addClass(j.childNodes[j.childNodes.length-1],"mceLast")});e.get(i.theme_advanced_toolbar_container)?e.get(i.theme_advanced_toolbar_container).appendChild(o):e.insertAfter(o,c);p.add(h.id+"_path_row","click",function(j){j=j.target;if(j.nodeName=="A"){d._sel(j.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return p.cancel(j)}});h.getParam("accessibility_focus")||p.add(e.add(o,"a",
{href:"#"},"<!-- IE --\>"),"focus",function(){tinyMCE.get(h.id).focus()});if(i.theme_advanced_toolbar_location=="external"||i.theme_advanced_toolbar_location=="docked")a.deltaHeight=0;d.deltaHeight=a.deltaHeight;a.targetNode=null;h.onKeyDown.add(function(j,n){if(n.altKey)if(n.keyCode===121){d.toolbarGroup.focus();return p.cancel(n)}else if(n.keyCode===122){e.get(j.id+"_path_row").focus();return p.cancel(n)}});h.addShortcut("alt+0","","mceShortcuts",d);return{iframeContainer:b,editorContainer:h.id+
"_parent",sizeContainer:g,deltaHeight:a.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:r.majorVersion+"."+r.minorVersion}},resizeBy:function(a,c){var b=e.get(this.editor.id+"_ifr");this.resizeTo(b.clientWidth+a,b.clientHeight+c)},resizeTo:function(a,c,b){var f=this.editor,d=this.settings,h=e.get(f.id+"_tbl"),i=e.get(f.id+"_ifr");a=Math.max(d.theme_advanced_resizing_min_width||100,a);c=Math.max(d.theme_advanced_resizing_min_height||
100,c);a=Math.min(d.theme_advanced_resizing_max_width||65535,a);c=Math.min(d.theme_advanced_resizing_max_height||65535,c);e.setStyle(h,"height","");e.setStyle(i,"height",c);if(d.theme_advanced_resize_horizontal){e.setStyle(h,"width","");e.setStyle(i,"width",a);if(a<h.clientWidth){a=h.clientWidth;e.setStyle(i,"width",h.clientWidth)}}b&&d.theme_advanced_resizing_use_cookie&&A.setHash("TinyMCE_"+f.id+"_size",{cw:a,ch:c})},destroy:function(){var a=this.editor.id;p.clear(a+"_resize");p.clear(a+"_path_row");
p.clear(a+"_external_close")},_simpleLayout:function(a,c,b,f){var d=this.editor,h=a.theme_advanced_toolbar_location,i=a.theme_advanced_statusbar_location,g,o,l;if(a.readonly){g=e.add(c,"tr");return g=o=e.add(g,"td",{"class":"mceIframeContainer"})}h=="top"&&this._addToolbars(c,b);if(h=="docked"){g=l=e.create("div",{style:"position:relative"});g=e.add(g,"div",{id:d.id+"_external"});g=e.add(g,"table",{id:d.id+"_tblext",cellSpacing:0,cellPadding:0});g=e.add(g,"tbody");var j=document.getElementById(a.theme_penzu_toolbar_location_docked_element_id);
if(j!=null){j.className="mceEditor "+d.settings.skin+"Skin";j.appendChild(l)}this._addToolbars(g,b)}if(h=="external"){g=l=e.create("div",{style:"position:relative"});g=e.add(g,"div",{id:d.id+"_external","class":"mceExternalToolbar"});e.add(g,"a",{id:d.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});g=e.add(g,"table",{id:d.id+"_tblext",cellSpacing:0,cellPadding:0});g=e.add(g,"tbody");f.firstChild.className=="mceOldBoxModel"?f.firstChild.appendChild(l):f.insertBefore(l,f.firstChild);
this._addToolbars(g,b);d.onMouseUp.add(function(){var n=e.get(d.id+"_external");e.show(n);e.hide(B);var t=p.add(d.id+"_external_close","click",function(){e.hide(d.id+"_external");p.remove(d.id+"_external_close","click",t)});e.show(n);e.setStyle(n,"top",0-e.getRect(d.id+"_tblext").h-1);e.hide(n);e.show(n);n.style.filter="";B=d.id+"_external";n=null})}i=="top"&&this._addStatusBar(c,b);if(!a.theme_advanced_toolbar_container){g=e.add(c,"tr");g=o=e.add(g,"td",{"class":"mceIframeContainer"})}h=="bottom"&&
this._addToolbars(c,b);i=="bottom"&&this._addStatusBar(c,b);return o},_rowLayout:function(a,c,b){var f=this,d,h,i=f.editor.controlManager,g,o,l,j;d=a.theme_advanced_containers_default_class||"";h=a.theme_advanced_containers_default_align||"center";s(z(a.theme_advanced_containers||""),function(n,t){var u=a["theme_advanced_container_"+n]||"";switch(u.toLowerCase()){case "mceeditor":g=e.add(c,"tr");g=o=e.add(g,"td",{"class":"mceIframeContainer"});break;case "mceelementpath":f._addStatusBar(c,b);break;
default:j=(a["theme_advanced_container_"+n+"_align"]||h).toLowerCase();j="mce"+f._ufirst(j);g=e.add(e.add(c,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+n+"_class"]||d)+" "+j||h});l=i.createToolbar("toolbar"+t);f._addControls(u,l);e.setHTML(g,l.renderHTML());b.deltaHeight-=a.theme_advanced_row_height}});return o},_addControls:function(a,c){var b=this,f=b.settings,d,h=b.editor.controlManager;if(f.theme_advanced_disable&&!b._disabled){d={};s(z(f.theme_advanced_disable),function(i){d[i]=
1});b._disabled=d}else d=b._disabled;s(z(a),function(i){if(!(d&&d[i]))if(i=="tablecontrols")s(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(g){(g=b.createControl(g,h))&&c.add(g)});else(i=b.createControl(i,h))&&c.add(i)})},_addToolbars:function(a,c){var b,f,d=this.editor,h=this.settings,i,g=d.controlManager,o,l=[],j;this.toolbarGroup=j=g.createToolbarGroup("toolbargroup",{name:d.getLang("advanced.toolbar"),
tab_focus_toolbar:d.getParam("theme_advanced_tab_focus_toolbar")});b=h.theme_advanced_toolbar_align.toLowerCase();b="mce"+this._ufirst(b);o=e.add(e.add(a,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+b,role:"presentation"});for(b=1;i=h["theme_advanced_buttons"+b];b++){f=g.createToolbar("toolbar"+b,{"class":"mceToolbarRow"+b});if(h["theme_advanced_buttons"+b+"_add"])i+=","+h["theme_advanced_buttons"+b+"_add"];if(h["theme_advanced_buttons"+b+"_add_before"])i=h["theme_advanced_buttons"+b+"_add_before"]+
","+i;this._addControls(i,f);j.add(f);c.deltaHeight-=h.theme_advanced_row_height}l.push(j.renderHTML());l.push(e.createHTML("a",{href:"#",accesskey:"z",title:d.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+d.id+"').focus();"},"<!-- IE --\>"));e.setHTML(o,l.join(""))},_addStatusBar:function(a,c){var b,f=this,d=f.editor,h=f.settings,i;b=e.add(a,"tr");b=i=e.add(b,"td",{"class":"mceStatusbar"});b=e.add(b,"div",{id:d.id+"_path_row",role:"group","aria-labelledby":d.id+"_path_voice"});
if(h.theme_advanced_path){e.add(b,"span",{id:d.id+"_path_voice"},d.translate("advanced.path"));e.add(b,"span",{},": ")}else e.add(b,"span",{},"&#160;");if(h.theme_advanced_resizing){e.add(i,"a",{id:d.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});h.theme_advanced_resizing_use_cookie&&d.onPostRender.add(function(){var g=A.getHash("TinyMCE_"+d.id+"_size");e.get(d.id+"_tbl");g&&f.resizeTo(g.cw,g.ch)});d.onPostRender.add(function(){p.add(d.id+"_resize","click",function(g){g.preventDefault()});
p.add(d.id+"_resize","mousedown",function(g){function o(v){v.preventDefault();q=k+(v.screenX-x);w=m+(v.screenY-y);f.resizeTo(q,w)}function l(v){p.remove(e.doc,"mousemove",j);p.remove(d.getDoc(),"mousemove",n);p.remove(e.doc,"mouseup",t);p.remove(d.getDoc(),"mouseup",u);q=k+(v.screenX-x);w=m+(v.screenY-y);f.resizeTo(q,w,true)}var j,n,t,u,x,y,k,m,q,w;g.preventDefault();x=g.screenX;y=g.screenY;g=e.get(f.editor.id+"_ifr");k=q=g.clientWidth;m=w=g.clientHeight;j=p.add(e.doc,"mousemove",o);n=p.add(d.getDoc(),
"mousemove",o);t=p.add(e.doc,"mouseup",l);u=p.add(d.getDoc(),"mouseup",l)})})}c.deltaHeight-=21;b=a=null},_updateUndoStatus:function(a){var c=a.controlManager;c.setDisabled("undo",!a.undoManager.hasUndo()&&!a.typing);c.setDisabled("redo",!a.undoManager.hasRedo())},_nodeChanged:function(a,c,b,f,d){function h(k){var m,q=d.parents,w=k;if(typeof k=="string")w=function(v){return v.nodeName==k};for(m=0;m<q.length;m++)if(w(q[m]))return q[m]}var i=this,g,o=0,l,j,n=i.settings,t,u,x,y;r.each(i.stateControls,
function(k){c.setActive(k,a.queryCommandState(i.controls[k][1]))});c.setActive("visualaid",a.hasVisual);c.setDisabled("undo",!a.undoManager.hasUndo()&&!a.typing);c.setDisabled("redo",!a.undoManager.hasRedo());c.setDisabled("outdent",!a.queryCommandState("Outdent"));g=h("A");if(j=c.get("link"))if(!g||!g.name){j.setDisabled(!g&&f);j.setActive(!!g)}if(j=c.get("unlink")){j.setDisabled(!g&&f);j.setActive(!!g&&!g.name)}if(j=c.get("anchor"))j.setActive(!f&&!!g&&g.name);g=h("IMG");if(j=c.get("image"))j.setActive(!f&&
!!g&&b.className.indexOf("mceItem")==-1);if(j=c.get("styleselect")){i._importClasses();y=[];s(j.items,function(k){y.push(k.value)});f=a.formatter.matchAll(y);j.select(f[0])}if(j=c.get("formatselect"))(g=h(e.isBlock))&&j.select(g.nodeName.toLowerCase());h(function(k){if(k.nodeName==="SPAN")if(!t&&k.className)t=k.className;if(a.dom.is(k,n.theme_advanced_font_selector)){if(!u&&k.style.fontSize)u=k.style.fontSize;if(!x&&k.style.fontFamily)x=k.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,
"$1").toLowerCase()}return false});if(j=c.get("fontselect"))j.select(function(k){return k.replace(/^([^,]+).*/,"$1").toLowerCase()==x});if(j=c.get("fontsizeselect")){if(n.theme_advanced_runtime_fontsize&&!u&&!t)u=a.dom.getStyle(b,"fontSize",true);j.select(function(k){if(k.fontSize&&k.fontSize===u)return true;if(k["class"]&&k["class"]===t)return true})}if(n.theme_advanced_show_current_color){b=function(k,m){if(j=c.get(k)){if(!m)m=j.settings.default_color;m!==j.value&&j.displayColor(m)}};b("forecolor",
fc);b("backcolor",bc)}if(n.theme_advanced_path&&n.theme_advanced_statusbar_location){g=e.get(a.id+"_path")||e.add(a.id+"_path_row","span",{id:a.id+"_path"});if(i.statusKeyboardNavigation){i.statusKeyboardNavigation.destroy();i.statusKeyboardNavigation=null}e.setHTML(g,"");h(function(k){var m=k.nodeName.toLowerCase(),q="";if(!k.getAttribute("data-mce-bogus"))if(!(k.nodeType!=1||k.nodeName==="BR"||e.hasClass(k,"mceItemHidden")||e.hasClass(k,"mceItemRemoved"))){if(r.isIE&&k.scopeName!=="HTML")m=k.scopeName+
":"+m;m=m.replace(/mce\:/g,"");switch(m){case "b":m="strong";break;case "i":m="em";break;case "img":if(l=e.getAttrib(k,"src"))q+="src: "+l+" ";break;case "a":if(l=e.getAttrib(k,"name")){q+="name: "+l+" ";m+="#"+l}if(l=e.getAttrib(k,"href"))q+="href: "+l+" ";break;case "font":if(l=e.getAttrib(k,"face"))q+="font: "+l+" ";if(l=e.getAttrib(k,"size"))q+="size: "+l+" ";if(l=e.getAttrib(k,"color"))q+="color: "+l+" ";break;case "span":if(l=e.getAttrib(k,"style"))q+="style: "+l+" ";break}if(l=e.getAttrib(k,
"id"))q+="id: "+l+" ";if(l=k.className)if(l=l.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"")){q+="class: "+l+" ";if(e.isBlock(k)||m=="img"||m=="span")m+="."+l}m=m.replace(/(html:)/g,"");m={name:m,node:k,title:q};i.onResolveName.dispatch(i,m);q=m.title;m=m.name;k=e.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:q,"class":"mcePath_"+o++},m);if(g.hasChildNodes()){g.insertBefore(e.create("span",{"aria-hidden":"true"},"\u00a0\u00bb "),g.firstChild);g.insertBefore(k,g.firstChild)}else g.appendChild(k)}},
a.getBody());if(e.select("a",g).length>0)i.statusKeyboardNavigation=new r.ui.KeyboardNavigation({root:a.id+"_path_row",items:e.select("a",g),excludeFromTabOrder:true,onCancel:function(){a.focus()}},e)}},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",false,a)},_mceInsertAnchor:function(){var a=this.editor;a.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(a.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(a.getLang("advanced.anchor_delta_height",0)),inline:true},
{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){this.editor.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){this.editor.windowManager.open({url:this.url+"/shortcuts.htm",
width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(a,c){var b=this.editor;c=c||{};b.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(b.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(b.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:c.color,func:c.func,theme_url:this.url})},_mceCodeEditor:function(){var a=this.editor;a.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(a.getParam("theme_advanced_source_editor_width",
720)),height:parseInt(a.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(){var a=this.editor;a.dom.getAttrib(a.selection.getNode(),"class").indexOf("mceItem")==-1&&a.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(a.getLang("advanced.image_delta_width",0)),height:275+parseInt(a.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(){var a=this.editor;
a.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(a.getLang("advanced.link_delta_width",0)),height:200+parseInt(a.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",function(c){c&&a.execCommand("mceSetContent",false,"")})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(c){a.fgColor=c;a.editor.execCommand("ForeColor",false,
c)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(c){a.bgColor=c;a.editor.execCommand("HiliteColor",false,c)}})},_ufirst:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}});r.ThemeManager.add("advanced",r.themes.AdvancedTheme)})(tinymce);
